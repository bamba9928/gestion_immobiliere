<!DOCTYPE html>
{% load static %}
{% load humanize %}
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Quittance de Loyer - {{ loyer.periode_debut|date:"F Y" }}</title>
    <style>
        @page {
            size: A5 landscape; /* Format A5 Paysage souvent utilisé pour les quittances */
            margin: 1.5cm;
        }
        body {
            font-family: Helvetica, Arial, sans-serif;
            font-size: 11pt;
            color: #333;
            line-height: 1.4;
        }
        .header {
            border-bottom: 2px solid #10b981;
            padding-bottom: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
        }
        .title {
            font-size: 18pt;
            font-weight: bold;
            text-transform: uppercase;
            color: #10b981;
        }
        .ref {
            font-size: 9pt;
            color: #666;
            text-align: right;
        }
        .box {
            background-color: #f9fafb;
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        .row { margin-bottom: 8px; }
        .label { font-weight: bold; width: 150px; display: inline-block; }
        .footer {
            margin-top: 30px;
            font-size: 8pt;
            color: #777;
            text-align: center;
            border-top: 1px solid #eee;
            padding-top: 10px;
        }
        .stamp {
            margin-top: 20px;
            text-align: right;
            font-weight: bold;
            color: #10b981;
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="title">Quittance de Loyer</div>
        <div class="ref">
            N° Quittance : {{ loyer.id }}<br>
            Date d'émission : {% now "d/m/Y" %}
        </div>
    </div>

    <p><strong>Agence / Bailleur :</strong><br>
    {{ loyer.bail.bien.proprietaire.get_full_name|default:"MADA IMMO" }}<br>
    Gestion Immobilière</p>

    <div class="box">
        <div class="row">
            <span class="label">Locataire :</span>
            <span>{{ loyer.bail.locataire.get_full_name|upper }}</span>
        </div>
        <div class="row">
            <span class="label">Bien loué :</span>
            <span>{{ loyer.bail.bien.adresse }} - {{ loyer.bail.bien.ville }}</span>
        </div>
        <div class="row">
            <span class="label">Période :</span>
            <span>Du <strong>{{ loyer.periode_debut|date:"d/m/Y" }}</strong> au <strong>{{ loyer.periode_fin|date:"d/m/Y" }}</strong></span>
        </div>
    </div>

    <p>Je soussigné(e), propriétaire ou mandataire du logement désigné ci-dessus, déclare avoir reçu de la part du locataire la somme de :</p>

    <div style="text-align: center; font-size: 16pt; font-weight: bold; margin: 20px 0; padding: 10px; background: #ecfdf5; color: #064e3b; border: 1px solid #10b981;">
        {{ loyer.montant_verse|intcomma }} FCFA
    </div>

    <p>En règlement du loyer et des charges pour la période susmentionnée.</p>

    <div class="box" style="margin-top: 20px;">
        <div class="row"><span class="label">Détail du paiement :</span></div>
        <div class="row">
            <span class="label">- Loyer & Charges :</span> {{ loyer.montant_du|intcomma }} FCFA
        </div>
        <div class="row">
            <span class="label">- Montant Versé :</span> {{ loyer.montant_verse|intcomma }} FCFA
        </div>
        <div class="row">
            <span class="label">- Reste à payer :</span>
            {% if loyer.reste_a_payer > 0 %}
                <strong style="color: red;">{{ loyer.reste_a_payer|intcomma }} FCFA</strong>
            {% else %}
                <strong style="color: green;">0 FCFA (Soldé)</strong>
            {% endif %}
        </div>
    </div>

    <div class="stamp">
        <p>Le Bailleur / L'Agence</p>
        <p style="font-size: 8pt; font-style: italic;">(Document généré électroniquement)</p>
    </div>

    <div class="footer">
        Cette quittance annule tous les reçus qui auraient pu être donnés pour acompte versé sur le présent terme.<br>
        En cas de congé, elle ne vaut pas renonciation à la location.
    </div>

</body>
</html>